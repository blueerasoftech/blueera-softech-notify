{% extends "partials/base.html" %}
{% load static %}
{% block title %}Simulation Detail{% endblock title %}
{% block extra_css %}
<link href="{% static 'select2/select2.css'%}" rel="stylesheet" type="text/css" />
<style>
    .col-simulation-detail {
        min-width: 110px;
    }
</style>
{% endblock extra_css %}
{% block content %}
            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->
            <div class="main-content">

                <div class="page-content">
                    <div class="container-fluid">

                        {% block pagetitle %}
                        {% include "partials/page-title.html" with pagetitle="Settings" title="Simulation Detail" %}
                        {% endblock pagetitle %}

                        {% block alerts %}
                            {% include "partials/errors.html" with messages=messages %}
                        {% endblock alerts %}
    


                        <div class="row">
                            <div class="col-lg-9">
                                <div class="card" id="orderList">
                                    <form method="POST" id="alert_type_form" action="{% url 'apps.main.settings:simulation-detail' user_id=UserID %}">
                                            <div class="card-header border-1">
                                                <div class="row align-items-center gy-3">
                                                    <div class="col-sm-auto">
                                                        <h5 class="card-title mb-0">Select Alert Type</h5>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div>
                                                            {% csrf_token %}
                                                            <input type="hidden" class="form-control" name="user_id" id="user_id" value="{{ UserID|default:'0' }}" placeholder="">
                                                            

                                                            
                                                            <select class="form-control" data-choices data-choices-search-false
                                                                name="alert_id" id="alertType">
                                                                {% for alert in alerts%}
                                                                    <option value="{{ alert.id }}" {% if forloop.counter0 == 0 %} selected {% endif %}>{{ alert.name }}</option>
                                                                {% endfor %}
                                                            </select>

                                                        
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                    
                                            <div class="card-body">
                                                <div class="mt-0 row mb-2">
                                                    <div class="col-6">
                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>User ID :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ user.user_id|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>Name :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ user.name|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>Email :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ user.email|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>


                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>Mobile :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ usersData.phone_numbers|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-6">
                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto col-simulation-detail">
                                                                <h6>Department :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ user.department|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>Designation :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ user.designation|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>Branch :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">{{ user.branch|default:'-' }}</h6>
                                                                </div>
                                                            </div>
                                                        </div>


                                                        <div class="row align-items-center mt-0 gy-3">
                                                            <div class="col-auto  col-simulation-detail">
                                                                <h6>Gender :</h6>
                                                            </div>
                                                            <div class="col-auto">
                                                                <div>
                                                                    <h6 style="color:#099885;">
                                                                        {% if user.gender == 'M' %}
                                                                            Male
                                                                        {% elif user.gender == 'F' %}
                                                                            Female
                                                                        {% else %}
                                                                            {{ user.gender|default:'-' }}
                                                                        {% endif %}
                                                                    </h6>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="mt-0 row mb-2">

                                                    <div class="mt-4 mb-4 col-xxl-6 col-md-6">
                                                        <label for="mobile" class="form-label">Mobile Number</label>
                                                        <input type="text" class="form-control" name="mobile" id="mobile" value="{{ mobile|default:"" }}" placeholder="">
                                                    </div>
                                                    <div class="mt-4 col-xxl-6 col-md-6"></div>

                                                    <div class="col-xxl-6 col-md-6">
                                                        <label for="body_parameter_2_sample" class="form-label pt-2" style="color: rgba(0,0,0,0.45) !important;">Message Preview</label>
                                                        {% for alert in alerts%}
                                                            <div class"alert-msg-preview" id="alert-msg-preview-{{ alert.id }}" style="{% if forloop.counter0 == 0 %} display: block; {% else %} display: none; {% endif %}">
                                                                {% if alert.sample_header_msg is not None and alert.sample_header_msg|length > 1 %}
                                                                    <span class="d-flex" style="color:#0ab39c;">{{ alert.sample_header_msg|default:"" }}</span>
                                                                    <br>
                                                                {% endif %}

                                                                {% if alert.sample_body_msg is not None and alert.sample_body_msg|length > 1 %}
                                                                    <span class="d-flex" style="color:#0ab39c;">{{ alert.sample_body_msg|default:"" }}</span>
                                                                    <br>
                                                                {% endif %}

                                                                {% if alert.sample_footer_msg is not None and alert.sample_footer_msg|length > 1 %}
                                                                    <span class="d-flex" style="color:#0ab39c;">{{ alert.sample_footer_msg|default:"" }}</span>
                                                                    <br>
                                                                {% endif %}
                                                            </div>
                                                            
                                                        {% endfor %}
                                                    </div>
                                                </div>



                                                {% if user.wa_msg_status is not None and user.wa_msg_status != "" %}
                                                    <div class="mt-0 row mb-2">
                                                        <div class="col-6">
                                                            <div class="row align-items-center mt-0 gy-3">
                                                                <div class="col-auto  col-simulation-detail">
                                                                    <h6>WhatsApp Delivery Status :</h6>
                                                                </div>
                                                                <div class="col-auto">
                                                                    <div>
                                                                        <h6 style="color:#099885;">{{ user.wa_msg_status|default:'-' }}</h6>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            </div>



                                            <div class="card-footer border-1">
                                                <div class="col-sm-auto mt-2">
                                                    <div class="gap-1 flex-wrap">
                                                        <button type="submit" class="btn btn-success add-btn" id="profile_submit_btn"><i class="ri-whatsapp-line align-bottom me-1"></i> Send Test Message</button>
                                                        <a href={% url 'apps.main.settings:simulation-detail' user_id=user.id %} {% if user.wa_msg_status is None or user.wa_msg_status == "" %} disabled {% endif %} style="margin-left:15px;" type="button" class="btn btn-success add-btn" id="delivery_status_btn"><i class="ri-mail-unread-line align-bottom me-1"></i> Delivery Status</a>
                                                    </div>
                                                
                                                    <div class="mt-3">
                                                        <span class="submit_profile_form_status"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        
                                    </form>
                                </div>
            
                            </div>
                            <!--end col-->
                        </div>
                        
                    </div>
                    <!-- container-fluid -->
                </div>
                <!-- End Page-content -->

            {% block footer %}
            {% include "partials/footer.html" %}
            {% endblock footer %}
            </div>
            <!-- end main content-->
{% endblock content %}

{% block extra_js %}

<!-- list.js min js -->
<script src="{% static 'select2/select2.js'%}"></script>

<!-- list.js min js -->
<!-- <script src="{% static 'libs/list.js/list.min.js'%}"></script> -->

<!--list pagination js-->
<!-- <script src="{% static 'libs/list.pagination.js/list.pagination.min.js'%}"></script> -->


        <script>
            var alertType = document.getElementById("alertType");
            var alertTypeChoices = new Choices(alertType, {
                searchEnabled: false,
            });

        </script>
        

{% endblock extra_js %}